<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kraftwerk App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
        .view-container {
            max-width: 4xl;
            margin: auto;
            background-color: #fff;
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 2.5rem;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body class="p-6 md:p-12">

    <!-- Hauptmenü Ansicht -->
    <div id="main-menu" class="view-container">
        <h1 class="text-3xl md:text-4xl font-bold text-center mb-6 text-gray-800">
            Wissens-App
        </h1>
        <p class="text-gray-600 text-center mb-10">
            Wählen Sie ein Thema aus, um mehr zu erfahren und Ihr Wissen zu testen.
        </p>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <button onclick="showView('kohlekraftwerk')" class="bg-blue-500 text-white py-4 px-6 rounded-lg font-semibold hover:bg-blue-600 transition-colors">
                Wie ein Kohlekraftwerk funktioniert
            </button>
            <button onclick="showView('about')" class="bg-gray-300 text-gray-800 py-4 px-6 rounded-lg font-semibold hover:bg-gray-400 transition-colors">
                Über dieses Projekt
            </button>
        </div>
    </div>

    <!-- Ansicht Kohlekraftwerk -->
    <div id="kohlekraftwerk" class="view-container hidden">
        <h1 class="text-3xl md:text-4xl font-bold text-center mb-6 text-gray-800">
            Kohlekraftwerk
        </h1>
        <p class="text-gray-600 text-center mb-10">
            Eine strukturierte Einführung in die grundlegenden Prinzipien der Stromerzeugung aus Kohle.
        </p>

        <!-- Lernschritte-Container -->
        <div id="learning-container">
            <!-- Inhalte werden hier dynamisch eingefügt -->
        </div>
    </div>

    <!-- Über das Projekt Ansicht (Placeholder) -->
    <div id="about" class="view-container hidden">
        <h1 class="text-3xl md:text-4xl font-bold text-center mb-6 text-gray-800">
            Über dieses Projekt
        </h1>
        <p class="text-gray-600 text-center mb-4">
            Diese App wurde erstellt, um die Funktionsweise eines Kohlekraftwerks einfach zu erklären. Sie können die Schritte lernen und Ihr Wissen in einem kleinen Quiz testen.
        </p>
        <div class="flex justify-center">
            <button onclick="showView('main-menu')" class="mt-4 bg-gray-300 text-gray-800 py-2 px-6 rounded-full font-semibold hover:bg-gray-400 transition-colors">
                Zurück zum Menü
            </button>
        </div>
    </div>

    <!-- Quiz Ansicht -->
    <div id="quiz" class="view-container hidden">
        <h1 class="text-3xl md:text-4xl font-bold text-center mb-6 text-gray-800">
            Quiz: Kohlekraftwerk
        </h1>
        <p class="text-gray-600 text-center mb-8">
            Testen Sie Ihr Wissen über die Funktionsweise eines Kohlekraftwerks.
        </p>
        <div id="quiz-questions">
            <!-- Fragen werden hier dynamisch eingefügt -->
        </div>
        <div class="flex justify-center mt-8">
            <button onclick="submitQuiz()" class="bg-green-500 text-white py-2 px-6 rounded-full font-semibold hover:bg-green-600 transition-colors">
                Antworten überprüfen
            </button>
        </div>
    </div>

    <!-- Message box für Quiz-Ergebnisse -->
    <div id="message-box" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white p-8 rounded-lg shadow-xl text-center">
            <p id="message-text" class="text-xl mb-4"></p>
            <button onclick="hideMessage()" class="bg-blue-500 text-white py-2 px-4 rounded-full hover:bg-blue-600 transition-colors">OK</button>
        </div>
    </div>

    <script>
        const views = ['main-menu', 'kohlekraftwerk', 'about', 'quiz'];
        const learningSteps = [
            {
                title: "Grundprinzip: Vom Stein zum Strom",
                content: "Ein Kohlekraftwerk wandelt die in Kohle gespeicherte chemische Energie in elektrische Energie um. Dieser Prozess folgt einem einfachen Prinzip: Hitze erzeugt Dampf, Dampf treibt eine Turbine an, die Turbine dreht einen Generator, und der Generator erzeugt Strom. "
            },
            {
                title: "1. Die Verbrennung",
                content: "Alles beginnt mit der Verbrennung von Kohle. Die Kohle wird gemahlen und in einem großen Kessel verbrannt. Durch die Verbrennung wird eine immense Menge an Wärmeenergie freigesetzt, die den nächsten Schritt antreibt. Diese Verbrennung ist der Kern des gesamten Prozesses, da sie die Energie liefert, die das Kraftwerk benötigt, um zu funktionieren."
            },
            {
                title: "2. Wassererhitzung zu Dampf",
                content: "Die durch die Verbrennung entstandene Wärme erhitzt Wasser in einem Rohrsystem innerhalb des Kessels. Das Wasser wird so stark erhitzt, dass es zu Hochdruckdampf wird. Die Energie der Kohle ist jetzt in der Energie des heißen Dampfes gespeichert."
            },
            {
                title: "3. Die Turbine und der Generator",
                content: "Der unter hohem Druck stehende Dampf wird durch Düsen auf die Schaufeln einer Turbine geleitet. Die Kraft des Dampfes bringt die Turbine zum Rotieren. Die sich drehende Turbine ist direkt mit einem Generator verbunden. Der Generator wandelt die mechanische Drehbewegung der Turbine in elektrische Energie um."
            },
            {
                title: "4. Der geschlossene Kreislauf",
                content: "Nachdem der Dampf seine Arbeit in der Turbine verrichtet hat, wird er in einem Kondensator abgekühlt. Dabei wird der Dampf wieder zu Wasser, das in den Kessel zurückgepumpt wird, um den Kreislauf zu schließen. So wird Wasser kontinuierlich wiederverwendet und die Energieumwandlung kann fortgesetzt werden. Oft wird hierfür Wasser aus nahegelegenen Flüssen oder Seen genutzt, weshalb Kraftwerke oft in der Nähe von Gewässern stehen."
            },
            {
                title: "5. Umweltauswirkungen",
                content: "Die Stromerzeugung aus Kohle hat erhebliche Umweltauswirkungen. Die Verbrennung von Kohle setzt große Mengen an Kohlendioxid ($CO_2$) frei, das maßgeblich zum Klimawandel beiträgt. Weitere Schadstoffe wie Schwefeldioxid ($SO_2$) und Stickoxide ($NO_x$) führen zu saurem Regen und Luftverschmutzung. Moderne Kraftwerke sind mit Filtern ausgestattet, um diese Emissionen zu reduzieren, aber sie können nicht vollständig verhindert werden."
            },
            {
                title: "6. Die Zukunft der Kohle",
                content: "Angesichts der Umweltauswirkungen und des Übergangs zu erneuerbaren Energien spielen Kohlekraftwerke eine immer geringere Rolle in der globalen Stromerzeugung. Viele Länder haben Pläne, aus der Kohleverstromung auszusteigen, um die Klimaziele zu erreichen. Technologien wie Carbon Capture and Storage (CCS) könnten die Emissionen reduzieren, aber die langfristige Zukunft liegt in saubereren Energiequellen wie Sonne, Wind und Wasser."
            }
        ];
        
        const quizQuestions = [
            {
                question: "Was erzeugt Dampf in einem Kohlekraftwerk?",
                options: ["Die Turbine", "Der Generator", "Der Kessel", "Der Kühlturm"],
                answer: 2
            },
            {
                question: "Welche Energieform wandelt der Generator in elektrische Energie um?",
                options: ["Wärmeenergie", "Chemische Energie", "Mechanische Energie", "Sonnenenergie"],
                answer: 2
            },
            {
                question: "Was ist der Haupttreiber für die globale Erwärmung, der bei der Kohleverbrennung freigesetzt wird?",
                options: ["Schwefeldioxid", "Stickoxide", "Kohlendioxid", "Wasserdampf"],
                answer: 2
            },
            {
                question: "Was ist die Hauptaufgabe des Kondensators?",
                options: ["Kohle verbrennen", "Strom erzeugen", "Dampf kühlen und wieder zu Wasser machen", "Luft filtern"],
                answer: 2
            }
        ];

        let currentStepIndex = 0;

        function showView(viewId) {
            views.forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });
            document.getElementById(viewId).classList.remove('hidden');

            if (viewId === 'kohlekraftwerk') {
                currentStepIndex = 0;
                renderLearningStep(currentStepIndex);
            }
        }

        function renderLearningStep(stepIndex) {
            const container = document.getElementById('learning-container');
            const step = learningSteps[stepIndex];
            const isLastStep = stepIndex === learningSteps.length - 1;

            let buttonHTML = '';
            if (isLastStep) {
                buttonHTML = `<button onclick="startQuiz()" class="bg-green-500 text-white py-2 px-4 rounded-full font-semibold hover:bg-green-600 transition-colors">Zum Quiz</button>`;
            } else {
                buttonHTML = `<button onclick="nextStep()" class="bg-blue-500 text-white py-2 px-4 rounded-full font-semibold hover:bg-blue-600 transition-colors">Nächster Schritt</button>`;
            }

            const backButtonHTML = stepIndex > 0 ? `<button onclick="prevStep()" class="mt-4 mr-4 text-gray-500 hover:text-gray-700 transition-colors"> < Vorheriger Schritt</button>` : '';

            container.innerHTML = `
                <div class="bg-gray-100 p-6 rounded-lg mb-8 shadow-md">
                    <h2 class="text-2xl font-semibold text-gray-700 mb-4">${step.title}</h2>
                    <p class="text-gray-600 mb-6">${step.content}</p>
                    <div class="flex items-center">
                        ${backButtonHTML}
                        ${buttonHTML}
                    </div>
                </div>
                <button onclick="showView('main-menu')" class="mt-4 text-gray-500 hover:text-gray-700 transition-colors">
                    < Zurück zum Hauptmenü
                </button>
            `;
        }

        function nextStep() {
            if (currentStepIndex < learningSteps.length - 1) {
                currentStepIndex++;
                renderLearningStep(currentStepIndex);
            }
        }

        function prevStep() {
            if (currentStepIndex > 0) {
                currentStepIndex--;
                renderLearningStep(currentStepIndex);
            }
        }

        function startQuiz() {
            showView('quiz');
            renderQuizQuestions();
        }

        function renderQuizQuestions() {
            const container = document.getElementById('quiz-questions');
            container.innerHTML = '';
            quizQuestions.forEach((q, index) => {
                const questionHtml = `
                    <div class="mb-6 p-4 bg-gray-50 rounded-lg">
                        <p class="font-semibold mb-2">${index + 1}. ${q.question}</p>
                        ${q.options.map((option, i) => `
                            <label class="block mb-2">
                                <input type="radio" name="question-${index}" value="${i}" class="mr-2">
                                ${option}
                            </label>
                        `).join('')}
                    </div>
                `;
                container.innerHTML += questionHtml;
            });

            // Füge den "Zurück zum Hauptmenü" Button am Ende hinzu
            container.innerHTML += `<div class="flex justify-center mt-4">
                                        <button onclick="showView('main-menu')" class="text-gray-500 hover:text-gray-700 transition-colors">
                                            < Zurück zum Hauptmenü
                                        </button>
                                    </div>`;
        }

        function submitQuiz() {
            let correctAnswers = 0;
            let allAnswered = true;

            quizQuestions.forEach((q, index) => {
                const radios = document.getElementsByName(`question-${index}`);
                let selectedOption = -1;
                radios.forEach(radio => {
                    if (radio.checked) {
                        selectedOption = parseInt(radio.value);
                    }
                });

                if (selectedOption === -1) {
                    allAnswered = false;
                } else if (selectedOption === q.answer) {
                    correctAnswers++;
                }
            });

            if (!allAnswered) {
                showMessage("Bitte beantworten Sie alle Fragen, bevor Sie fortfahren.");
                return;
            }

            const totalQuestions = quizQuestions.length;
            const score = Math.round((correctAnswers / totalQuestions) * 100);
            let message = `Sie haben ${correctAnswers} von ${totalQuestions} Fragen richtig beantwortet. (${score}%)`;

            if (score === 100) {
                message += "<br> Herzlichen Glückwunsch! Perfekte Punktzahl!";
            } else if (score >= 70) {
                message += "<br> Gut gemacht! Sie haben die Grundlagen verstanden.";
            } else {
                message += "<br> Das war noch nicht ganz perfekt. Versuchen Sie es noch einmal oder lesen Sie sich die Schritte noch einmal durch.";
            }
            
            showMessage(message);
        }

        function showMessage(message) {
            document.getElementById('message-text').innerHTML = message;
            document.getElementById('message-box').classList.remove('hidden');
        }

        function hideMessage() {
            document.getElementById('message-box').classList.add('hidden');
        }

        // Starte die App, indem das Hauptmenü angezeigt wird.
        window.onload = function() {
            showView('main-menu');
        };
    </script>
</body>
</html>

